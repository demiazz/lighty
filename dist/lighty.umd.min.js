/*! lighty v0.1.0 | https://github.com/demiazz/lighty | (c) Alexey Plutalov | MIT license */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.lighty=t.lighty||{})}(this,function(t){"use strict";function e(){var t=document.documentElement;return t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector}function n(t,e){return s.call(t,e)}function i(t,e){if(t.jquery)return t.filter(e).add(t.find(e)).toArray();var i;return t instanceof HTMLElement?i=[t]:t instanceof NodeList?i=[].slice.call(t):Array.isArray(t)?i=t:"string"==typeof t&&(i=[].slice.call(document.querySelectorAll(t))),i.reduce(function(t,i){return n(i,e)&&t.push(i),t.concat([].slice.call(i.querySelectorAll(e)))},[])}function r(t){void 0===t&&(t="default");var e=l[t];return e||(e=new u(t),l[t]=e),e}function o(t,e){return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return new c(t,e.apply(void 0,n))}}var s=e(),a=function(t,e,n,i){this.id=t,this.selector=e,this.proto=n,this.plugins=i};a.prototype.getInitializer=function(t){var e=this;void 0===t&&(t=document.body);var n=i(t,this.selector),r=n.reduce(function(t,n){return e.checkAndUpdateCache(n)&&t.push(e.createComponent(n)),t},[]);return this.createInitializer(r)},a.prototype.createComponent=function(t){for(var e=this,n={},i=Object.keys(this.proto),r=0;r<i.length;r+=1){var o=i[r];({}).hasOwnProperty.call(e.proto,o)&&(n[o]=e.proto[o])}return this.transformComponent(n,t),n},a.prototype.checkAndUpdateCache=function(t){return(!t.ids||t.ids.indexOf(this.id)===-1)&&(t.ids=t.ids?t.ids.concat(this.id):[this.id],!0)},a.prototype.transformComponent=function(t,e){for(var n=this,i=0;i<this.plugins.length;i+=1)n.plugins[i].transform(t,e)},a.prototype.createInitializer=function(t){return function(){for(var e=0;e<t.length;e+=1){var n=t[e];n.init&&n.init()}}};var u=function(t){this.name=t,this.plugins=[],this.builders=[],this.isReady=!1,this.isRunning=!1};u.prototype.use=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.plugins=this.plugins.concat(this.normalize(t)),this},u.prototype.component=function(t,e){var n=this.builders.length,i=new a(n,t,e,this.plugins);if(this.builders.push(i),this.isRunning){var r=i.getInitializer();r()}return this},u.prototype.vitalize=function(t){for(var e=this,n=0;n<this.builders.length;n+=1){var i=e.builders[n].getInitializer(t);i()}},u.prototype.run=function(){var t=this;return this.isReady=!0,"loading"!==document.readyState?this.start():document.addEventListener("DOMContentLoaded",function(){return t.start()}),this},u.prototype.start=function(){this.isRunning=!0,this.vitalize()},u.prototype.normalize=function(t){var e=this;return t.reduce(function(t,n){var i=Array.isArray(n)?n.map(function(t){return e.instantiatePlugin(t)}):e.instantiatePlugin(n);return t.concat(i)},[])},u.prototype.instantiatePlugin=function(t){return t instanceof Function?t():t};var c=function(t,e){this.name=t,this.transformer=e};c.prototype.transform=function(t,e){this.transformer(t,e)};var l={default:new u("default")},f=l.default;t.default=f,t.create=r,t.plugin=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=lighty.umd.min.js.map
