/*! lighty v0.4.0 | https://github.com/demiazz/lighty | (c) Alexey Plutalov | MIT license */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.lighty=t.lighty||{})}(this,function(t){"use strict";function e(){var t=document.documentElement;return t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector}function n(t,e){return s.call(t,e)}function i(t,e){if(t.jquery)return t.filter(e).add(t.find(e)).toArray();var i;return t instanceof HTMLElement?i=[t]:t instanceof NodeList?i=[].slice.call(t):Array.isArray(t)?i=t:"string"==typeof t&&(i=[].slice.call(document.querySelectorAll(t))),i.reduce(function(t,i){return n(i,e)&&t.push(i),t.concat([].slice.call(i.querySelectorAll(e)))},[])}function r(t){return new u(t)}function o(t,e){return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return new a(t,e.apply(void 0,n))}}var c=function(t,e,n,i,r){this.id=t,this.selector=e,this.proto=n,this.plugins=i,this.querySelector=r};c.prototype.getInitializer=function(t){var e=this;void 0===t&&(t=document.body);var n=this.querySelector(t,this.selector),i=n.reduce(function(t,n){return e.checkAndUpdateCache(n)&&t.push(e.createComponent(n)),t},[]);return function(){i.forEach(function(t){t.init&&t.init()})}},c.prototype.createComponent=function(t){var e=this,n=Object.keys(this.proto).reduce(function(t,n){return t[n]=e.proto[n],t},{});return this.transformComponent(n,t),n},c.prototype.checkAndUpdateCache=function(t){return(!t.ids||t.ids.indexOf(this.id)===-1)&&(t.ids=t.ids?t.ids.concat(this.id):[this.id],!0)},c.prototype.transformComponent=function(t,e){this.plugins.forEach(function(n){n.transform(t,e)})};var s=e(),u=function(t){var e=this;void 0===t&&(t={}),this.builders=[],this.isRunning=!1,this.querySelector=t.querySelector||i,this.plugins=[],t.plugins&&(this.plugins=t.plugins.map(function(t){return t instanceof Function?t():t})),"loading"!==document.readyState?this.isRunning=!0:document.addEventListener("DOMContentLoaded",function(){e.isRunning=!0,e.vitalize()})};u.prototype.component=function(t,e){var n=this.builders.length,i=new c(n,t,e,this.plugins,this.querySelector);if(this.builders.push(i),this.isRunning){var r=i.getInitializer();r()}return this},u.prototype.vitalize=function(t){this.builders.forEach(function(e){var n=e.getInitializer(t);n()})};var a=function(t,e){this.name=t,this.transformer=e};a.prototype.transform=function(t,e){this.transformer(t,e)},t.create=r,t.plugin=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=lighty.umd.min.js.map
