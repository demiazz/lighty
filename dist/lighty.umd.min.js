/*! lighty v0.8.0 | https://github.com/demiazz/lighty | (c) Alexey Plutalov | MIT license */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lighty",e):t.lighty=e()}(this,function(){"use strict";function t(){var t=document.documentElement;return t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector}function e(t,e){return c.call(t,e)}function n(t){return t.filter(function(t){return t instanceof Element})}function i(t){return[].slice.call(t)}function o(t,o,r){var c;if(t instanceof Element)c=[t];else if(t instanceof NodeList)c=n(i(t));else if(Array.isArray(t))c=n(t);else{if("string"!=typeof t)throw new TypeError("Unsupported type of tree root");c=i(document.querySelectorAll(t))}c.forEach(function(t){e(t,o)&&r(t),[].slice.call(t.querySelectorAll(o)).forEach(r)})}function r(t,e){return new s(t,e)}var c=t(),s=function t(e,n){var i=this;if(!(e instanceof Function))throw new TypeError("Builder must be a function");this.cacheKey="__lighty__"+t.getUniqueId(),this.builder=e,this.onStart=n,this.isRunning=!1,this.components=[],"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return i.start()}):setTimeout(function(){return i.start()},1)};return s.prototype.component=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=this.components.length;this.components.push([i,t,e]),this.isRunning&&this.build(document.body,i,t,e)},s.prototype.vitalize=function(t){var e=this;if(void 0===t&&(t=document.body),!this.isRunning)throw Error("Document is not ready yet.");this.components.forEach(function(n){(i=e).build.apply(i,[t].concat(n));var i})},s.prototype.start=function(){this.isRunning=!0,this.vitalize(),this.onStart&&this.onStart()},s.prototype.build=function(t,e,n,i){var r=this;o(t,n,function(t){if(!r.isCached(t,e)){(n=r).builder.apply(n,[t].concat(i)),r.cache(t,e);var n}})},s.prototype.isCached=function(t,e){var n=t[this.cacheKey];return n&&n.indexOf(e)!==-1},s.prototype.cache=function t(e,n){var t=e[this.cacheKey];e[this.cacheKey]=t?t.concat(n):[n]},s.getUniqueId=function(){null==this.incrementalId&&(this.incrementalId=0);var t=this.incrementalId;return this.incrementalId+=1,t},r});
//# sourceMappingURL=lighty.umd.min.js.map
