/*! lighty v0.6.0 | https://github.com/demiazz/lighty | (c) Alexey Plutalov | MIT license */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("lighty",["exports"],e):e(t.lighty=t.lighty||{})}(this,function(t){"use strict";function e(){var t=document.documentElement;return t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector}function n(t,e){return s.call(t,e)}function i(t){return t.filter(function(t){return t instanceof Element})}function o(t){return[].slice.call(t)}function r(t,e,r){var c;if(t instanceof Element)c=[t];else if(t instanceof NodeList)c=i(o(t));else if(Array.isArray(t))c=i(t);else{if("string"!=typeof t)throw new TypeError("Unsupported type of tree root");c=o(document.querySelectorAll(t))}c.forEach(function(t){n(t,e)&&r(t),[].slice.call(t.querySelectorAll(e)).forEach(r)})}function c(t,e){return new u(t,e)}var s=e(),u=function t(e,n){var i=this;if(!(e instanceof Function))throw new TypeError("Builder must be a function");this.cacheKey="__lighty__"+t.getUniqueId(),this.builder=e,this.onStart=n,this.isRunning=!1,this.components=[],"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return i.start()}):setTimeout(function(){return i.start()},1)};u.prototype.component=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=this.components.length;this.components.push([i,t,e]),this.isRunning&&this.build(document.body,i,t,e)},u.prototype.vitalize=function(t){var e=this;if(void 0===t&&(t=document.body),!this.isRunning)throw Error("Document is not ready yet.");this.components.forEach(function(n){(i=e).build.apply(i,[t].concat(n));var i})},u.prototype.start=function(){this.isRunning=!0,this.vitalize(),this.onStart&&this.onStart()},u.prototype.build=function(t,e,n,i){var o=this;r(t,n,function(t){if(!o.isCached(t,e)){(n=o).builder.apply(n,[t].concat(i)),o.cache(t,e);var n}})},u.prototype.isCached=function(t,e){var n=t[this.cacheKey];return n&&n.indexOf(e)!==-1},u.prototype.cache=function t(e,n){var t=e[this.cacheKey];e[this.cacheKey]=t?t.concat(n):[n]},u.getUniqueId=function(){null==this.incrementalId&&(this.incrementalId=0);var t=this.incrementalId;return this.incrementalId+=1,t},t.default=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=lighty.umd.min.js.map
